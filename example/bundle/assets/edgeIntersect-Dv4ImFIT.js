import{M as f,l as v,V as M,a7 as P,W as z,c as F,d as E,D,A as H,T as R,k as U,t as j,a8 as q,f as V,G as T,v as k,w as L,a9 as K,P as I,q as J,p as N,B as Q}from"./ExtendedTriangle-CFC-kWKu.js";import{S as X}from"./stats.min-GTpOrGrX.js";import{g as Y}from"./lil-gui.module.min-jESndyO-.js";import{O as Z}from"./OrbitControls-DPxOa-V_.js";import{S as _}from"./MeshBVH-CE-cOGaL.js";import{a as $,b as ee,e as te}from"./ExtensionUtilities-DtfWnSqQ.js";import"./_commonjsHelpers-Cpj98o6Y.js";f.prototype.raycast=$;v.prototype.computeBoundsTree=ee;v.prototype.disposeBoundsTree=te;const e={position:new M,rotation:new P,scale:new M(1,1,1),speed:1,displayMeshes:!1,distance:1.1};let O,a,r,i,m,u,d,x,b,B,S,t,p,A=window.performance.now();ne();G();function ne(){i=new z({antialias:!0}),i.setPixelRatio(window.devicePixelRatio),i.setSize(window.innerWidth,window.innerHeight),i.setClearColor(6687034,1),document.body.appendChild(i.domElement),a=new F,a.fog=new E(2503224/2,20,60);const g=new D(16777215,.5);g.position.set(1,1,1),a.add(g),a.add(new H(16777215,.4));const y=1,s=.4,n=100,c=40,o=new R(y,s,n,c),w=new U({color:16777215,side:j,shininess:.01,polygonOffset:!0,polygonOffsetFactor:1,polygonOffsetUnits:1,opacity:.5,blending:q}),W=new V({polygonOffset:!0,polygonOffsetFactor:1,polygonOffsetUnits:1,colorWrite:!1});o.computeBoundsTree({maxLeafTris:1,strategy:_}),t=new T,m=new f(o,w),m.renderOrder=2,B=new f(o,W),B.renderOrder=1,t.add(B,m),p=new T,u=new f(o,w),u.renderOrder=2,S=new f(o,W),S.renderOrder=1,p.add(S,u),a.add(t,p);const C=new v;C.setFromPoints([new M(0,1,0),new M(0,-1,0)]),x=new k(C,new L({color:15240106})),b=x.clone(),b.material=new L({color:15277667,transparent:!0,opacity:.25,depthFunc:K}),b.renderOrder=3,d=new T,d.add(x,b),a.add(d),r=new I(75,window.innerWidth/window.innerHeight,.1,50),r.position.set(2,2,2),r.far=100,r.updateProjectionMatrix(),new Z(r,i.domElement),O=new X,document.body.appendChild(O.dom);const h=new Y;h.add(e,"speed",0,10,.001),h.add(e,"distance",0,1.5,.001),h.add(e,"displayMeshes"),h.open(),window.addEventListener("resize",function(){r.aspect=window.innerWidth/window.innerHeight,r.updateProjectionMatrix(),i.setSize(window.innerWidth,window.innerHeight)},!1)}function G(){requestAnimationFrame(G);const l=window.performance.now()-A;A=window.performance.now(),t.position.y=-e.distance,t.rotation.x-=l*3*1e-4*e.speed*.5,t.rotation.y-=l*1*1e-4*e.speed*.5,t.rotation.z-=l*2*1e-4*e.speed*.5,p.position.y=e.distance,p.rotation.x+=l*1e-4*e.speed,p.rotation.y+=l*2*1e-4*e.speed,p.rotation.z+=l*3*1e-4*e.speed,a.updateMatrixWorld(!0);const g=new J().copy(m.matrixWorld).invert().multiply(u.matrixWorld),y=new N,s=[];if(m.geometry.boundsTree.bvhcast(u.geometry.boundsTree,g,{intersectsTriangles(n,c){if(n.intersectsTriangle(c,y)){const{start:o,end:w}=y;s.push(o.x,o.y,o.z,w.x,w.y,w.z)}}}),s.length){const n=x.geometry,c=n.attributes.position.array;c.length<s.length?(n.dispose(),n.setAttribute("position",new Q(new Float32Array(s),3,!1))):c.set(s),n.setDrawRange(0,s.length/3),n.attributes.position.needsUpdate=!0,d.position.copy(t.position),d.rotation.copy(t.rotation),d.scale.copy(t.scale),d.visible=!0}else d.visible=!1;t.visible=e.displayMeshes,p.visible=e.displayMeshes,i.render(a,r),O.begin(),O.end()}
