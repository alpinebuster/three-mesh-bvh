import{M as w,l as T,V as M,a7 as D,W,c as F,d as G,D as k,A as H,T as B,k as I,t as R,P as A,g as V,e as j,X as O,q,K,b as U}from"./ExtendedTriangle-CFC-kWKu.js";import{S as X}from"./stats.min-GTpOrGrX.js";import{g as J}from"./lil-gui.module.min-jESndyO-.js";import{O as N}from"./OrbitControls-DPxOa-V_.js";import{T as Q}from"./TransformControls-B0scPMrc.js";import{M as Y}from"./MeshBVHHelper-PaFFnbA9.js";import{a as Z,b as _,e as $}from"./ExtensionUtilities-DtfWnSqQ.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./MeshBVH-CE-cOGaL.js";w.prototype.raycast=Z;T.prototype.computeBoundsTree=_;T.prototype.disposeBoundsTree=$;const e={speed:1,visualizeBounds:!1,visualBoundsDepth:10,shape:"sphere",position:new M,rotation:new D,scale:new M(1,1,1)};let x,s,p,l,f,r,a,d,n={};function ee(){l=new W({antialias:!0}),l.setPixelRatio(window.devicePixelRatio),l.setSize(window.innerWidth,window.innerHeight),l.setClearColor(1251612,1),document.body.appendChild(l.domElement),s=new F,s.fog=new G(2503224/2,20,60);const m=new k(16777215,1.5);m.position.set(1,1,1),s.add(m),s.add(new H(16777215,1.2));const t=1,u=.4,o=400,c=100,P=new B(t,u,o,c),z=new I({color:16777215,side:R});d=new w(P,z),d.geometry.computeBoundsTree(),s.add(d),p=new A(75,window.innerWidth/window.innerHeight,.1,50),p.position.set(3,3,3),p.far=100,p.updateProjectionMatrix(),a=new Q(p,l.domElement),s.add(a),f=new N(p,l.domElement),x=new X,document.body.appendChild(x.dom);const g=new V({metalness:.1,transparent:!0,opacity:.75,premultipliedAlpha:!0});n.sphere=new w(new j(1,50,50),g),s.add(n.sphere),n.box=new w(new O(1,1,1),g),s.add(n.box),n.geometry=new w(new B(.5,.2,200,50),g),n.geometry.geometry.computeBoundsTree(),s.add(n.geometry);const i=new J;i.add(e,"speed").min(0).max(10),i.add(e,"visualizeBounds").onChange(()=>v()),i.add(e,"visualBoundsDepth").min(1).max(40).step(1).onChange(()=>v()),i.add(e,"shape",["sphere","box","geometry"]),i.add(a,"mode",["translate","rotate"]);const h=i.addFolder("position");h.add(e.position,"x").min(-5).max(5).step(.001),h.add(e.position,"y").min(-5).max(5).step(.001),h.add(e.position,"z").min(-5).max(5).step(.001),h.open();const y=i.addFolder("rotation");y.add(e.rotation,"x").min(-Math.PI).max(Math.PI).step(.001),y.add(e.rotation,"y").min(-Math.PI).max(Math.PI).step(.001),y.add(e.rotation,"z").min(-Math.PI).max(Math.PI).step(.001),y.open(),i.open(),a.addEventListener("change",function(){e.position.copy(n[e.shape].position),e.rotation.copy(n[e.shape].rotation),e.scale.copy(n[e.shape].scale),i.controllersRecursive().forEach(b=>b.updateDisplay())}),a.addEventListener("mouseDown",function(){f.enabled=!1}),a.addEventListener("mouseUp",function(){f.enabled=!0}),f.addEventListener("start",function(){a.enabled=!1}),f.addEventListener("end",function(){a.enabled=!0}),window.addEventListener("resize",function(){p.aspect=window.innerWidth/window.innerHeight,p.updateProjectionMatrix(),l.setSize(window.innerWidth,window.innerHeight)},!1),window.addEventListener("keydown",function(b){switch(b.key){case"w":a.mode="translate";break;case"e":a.mode="rotate";break}i.controllersRecursive().forEach(L=>L.updateDisplay())})}function v(){r&&!e.visualizeBounds&&(s.remove(r),r=null),!r&&e.visualizeBounds&&(r=new Y(d),s.add(r)),r&&(r.depth=e.visualBoundsDepth)}let S=window.performance.now();function C(){const E=window.performance.now()-S;S=window.performance.now(),d.rotation.y+=e.speed*E*.001,d.updateMatrixWorld(),x.begin(),r&&r.update(),l.render(s,p),x.end();for(const o in n)n[o].visible=!1;const m=e.shape,t=n[m];t.visible=!0,t.position.copy(e.position),t.rotation.copy(e.rotation),t.scale.copy(e.scale);const u=new q().copy(d.matrixWorld).invert().multiply(t.matrixWorld);if(m==="sphere"){const o=new K(void 0,1);o.applyMatrix4(u);const c=d.geometry.boundsTree.intersectsSphere(o);t.material.color.set(c?15277667:6710886),t.material.emissive.set(15277667).multiplyScalar(c?.25:0)}else if(m==="box"){const o=new U;o.min.set(-.5,-.5,-.5),o.max.set(.5,.5,.5);const c=d.geometry.boundsTree.intersectsBox(o,u);t.material.color.set(c?15277667:6710886),t.material.emissive.set(15277667).multiplyScalar(c?.25:0)}else if(m==="geometry"){const o=d.geometry.boundsTree.intersectsGeometry(t.geometry,u);t.material.color.set(o?15277667:6710886),t.material.emissive.set(15277667).multiplyScalar(o?.25:0)}a.object!==t&&a.attach(t),requestAnimationFrame(C)}ee();v();C();
